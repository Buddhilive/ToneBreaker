(function(){const c=document.createElement("link").relList;if(c&&c.supports&&c.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const n of a)if(n.type==="childList")for(const t of n.addedNodes)t.tagName==="LINK"&&t.rel==="modulepreload"&&s(t)}).observe(document,{childList:!0,subtree:!0});function i(a){const n={};return a.integrity&&(n.integrity=a.integrity),a.referrerPolicy&&(n.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?n.credentials="include":a.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function s(a){if(a.ep)return;a.ep=!0;const n=i(a);fetch(a.href,n)}})();var y=360,m=window.innerHeight/10,o=new Nexus.Sequencer("#target",{size:[y,y],mode:"toggle",rows:32,columns:16});o.colorize("accent","#FF6F00");var _=new Nexus.Dial("#dialer",{size:[m,m],interaction:"radial",mode:"relative",min:.5,max:2,step:.1,value:1});_.colorize("accent","#FF6F00");var f=new Nexus.Number("#dialNum");f.link(_);var M=new Nexus.Dial("#dialer2",{size:[m,m],interaction:"radial",mode:"relative",min:100,max:400,step:20,value:200});M.colorize("accent","#FFA800");var b=new Nexus.Number("#dialNum2");b.link(M);var S=new Nexus.Select("#drumSlider",{size:[120,30],options:["Drumkit1","Drumkit2","Drumkit3"]}),P=new Nexus.Select("#melodySlider",{size:[120,30],options:["Melody1","Melody2","Melody3"]}),v=b.value,p=16,l=f.value,u=Melody1,d=Drumkit1;document.getElementById("btn11").onclick=function(){H()};document.getElementById("btn22").onclick=function(){K()};document.getElementById("btn").onclick=function(){G()};document.getElementById("btnClose").onclick=function(){V()};var N=new Tone.Player("sounds/kick.mp3").toMaster(),A=new Tone.Player("sounds/snare.mp3").toMaster(),T=new Tone.Player("sounds/hihat-closed.mp3").toMaster(),q=new Tone.Player("sounds/hihat-open.mp3").toMaster(),z=new Tone.Player("sounds/tom-low.mp3").toMaster(),R=new Tone.Player("sounds/tom-mid.mp3").toMaster(),D=new Tone.Player("sounds/tom-high.mp3").toMaster(),x=new Tone.Player("sounds/clap.mp3").toMaster(),I=new Tone.Player("sounds/bassdrum.ogg").toMaster(),F=new Tone.Player("sounds/clav.ogg").toMaster(),B=new Tone.Player("sounds/crash.ogg").toMaster(),E=new Tone.Player("sounds/kick_distorted.ogg").toMaster(),w=new Tone.Player("sounds/ride.ogg").toMaster(),O=new Tone.Player("sounds/shaker.ogg").toMaster(),L=new Tone.Player("sounds/snare_electro.ogg").toMaster(),j=new Tone.Player("sounds/wood.ogg").toMaster(),r=new Tone.Synth({oscillator:{type:"triangle"},envelope:{attack:.001,decay:.1,sustain:.1,release:.1}}).toMaster();o.on("change",function(e){e.row==0&&e.state==!0});P.on("change",function(e){switch(e.value){case"Melody1":u=Melody1;break;case"Melody2":u=Melody2;break;case"Melody3":u=Melody3;break}});S.on("change",function(e){switch(e.value){case"Drumkit1":d=Drumkit1;break;case"Drumkit2":d=Drumkit2;break;case"Drumkit3":d=Drumkit3;break}});o.on("step",function(e){e[31]==1&&N.start(),e[30]==1&&A.start(),e[29]==1&&T.start(),e[28]==1&&q.start(),e[27]==1&&z.start(),e[26]==1&&R.start(),e[25]==1&&D.start(),e[24]==1&&x.start(),e[23]==1&&I.start(),e[22]==1&&F.start(),e[21]==1&&B.start(),e[20]==1&&E.start(),e[19]==1&&w.start(),e[18]==1&&O.start(),e[17]==1&&L.start(),e[16]==1&&j.start(),e[15]==1&&r.triggerAttackRelease("C#5","8n"),e[14]==1&&r.triggerAttackRelease("C5","8n"),e[13]==1&&r.triggerAttackRelease("B4","8n"),e[12]==1&&r.triggerAttackRelease("A#4","8n"),e[11]==1&&r.triggerAttackRelease("A4","8n"),e[10]==1&&r.triggerAttackRelease("G#4","8n"),e[9]==1&&r.triggerAttackRelease("G4","8n"),e[8]==1&&r.triggerAttackRelease("F#4","8n"),e[7]==1&&r.triggerAttackRelease("F4","8n"),e[6]==1&&r.triggerAttackRelease("E4","8n"),e[5]==1&&r.triggerAttackRelease("D#4","8n"),e[4]==1&&r.triggerAttackRelease("D4","8n"),e[3]==1&&r.triggerAttackRelease("C#4","8n"),e[2]==1&&r.triggerAttackRelease("C4","8n"),e[1]==1&&r.triggerAttackRelease("B3","8n"),e[0]==1&&r.triggerAttackRelease("A#3","8n")});var h=new mm.Player;function G(){if(g.isInitialized()==!0&&k.isInitialized()==!0){if(o.matrix.populate.all([0,0]),h.isPlaying()){h.stop();return}const c=mm.sequences.quantizeNoteSequence(u,1);mm.sequences.quantizeNoteSequence(d,1),g.continueSequence(c,p,l).then(i=>{for(var s=0;i.notes.length>s;s++){var a=i.notes[s].quantizedStartStep,n=i.notes[s].pitch,t=0;switch(n){case 58:t=0;break;case 59:t=1;break;case 60:t=2;break;case 61:t=3;break;case 62:t=4;break;case 63:t=5;break;case 64:t=6;break;case 65:t=7;break;case 66:t=8;break;case 67:t=9;break;case 68:t=10;break;case 69:t=11;break;case 70:t=12;break;case 71:t=13;break;case 72:t=14;break;case 73:t=15;break}o.matrix.set.cell(a,t,1)}}),k.continueSequence(c,p,l).then(i=>{for(var s=0;i.notes.length>s;s++){var a=i.notes[s].quantizedStartStep,n=i.notes[s].pitch,t=0;switch(n){case 58:t=16;break;case 59:t=17;break;case 60:t=18;break;case 61:t=19;break;case 62:t=20;break;case 63:t=21;break;case 64:t=22;break;case 65:t=23;break;case 66:t=24;break;case 67:t=25;break;case 68:t=26;break;case 69:t=27;break;case 70:t=28;break;case 71:t=29;break;case 72:t=30;break;case 73:t=31;break}o.matrix.set.cell(a,t,1)}})}else{var e=document.querySelector(".mdl-js-snackbar");e.MaterialSnackbar.showSnackbar({message:"Initializing.... Try again shortly...",timeout:1e4})}}function H(){o.start(v),document.getElementById("btn11").disabled=!0,document.getElementById("btn22").disabled=!1}function K(){o.stop(),document.getElementById("btn22").disabled=!0,document.getElementById("btn11").disabled=!1}function V(){v=b.value,l=f.value}var g=new mm.MusicRNN("https://storage.googleapis.com/magentadata/js/checkpoints/music_rnn/melody_rnn");g.initialize();var k=new mm.MusicRNN("https://storage.googleapis.com/magentadata/js/checkpoints/music_rnn/basic_rnn");k.initialize();
